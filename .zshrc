# reset
unalias -m "*"

# function paths
fpath=(~/.zsh "$HOME/.local/share/zsh/pure" $fpath)

# git completions
# https://github.com/git/git/tree/master/contrib/completion
#
# If you run into ZSH complaining about insecure directories it will be
# because of files being generated by other groups that are not you or root.
# So ZSH must be told about what to do with these files since they are not yours.
# You can run `compaudit` to list the insecure directores and `ls` will show a
# writable permission while being apart of an insecure group.
#
# Running this command will remove the group-writable permission on those directories:
#
# 	chmod g-w /usr/local/share/zsh
# 	chmod g-w /usr/local/share/zsh/site-functions
#
# Or more succinctly if there way more directories:
#
# 	compaudit | xargs chmod g-w
#
# This should take care of the warning every time a new ZSH shell is started.
zstyle ':completion:*:*:git:*' script ~/.local/share/zsh/git-completion.bash
autoload -Uz compinit && compinit

# prompt
# https://github.com/sindresorhus/pure
autoload -Uz promptinit && promptinit
prompt pure

# blocksize
export BLOCKSIZE=1k

# man pager
export MANPAGER="sh -c 'col -bx | bat -l man -p'"

# fs
alias l="\ls -G"
alias ls="\ls -G"
alias l="\ls -Gl"
alias ll="\ls -Gl"
alias la="\ls -Gla"
alias ..="\cd .."
alias ...="\cd ../.."
alias ....="\cd ../../.."
alias .....="\cd ../../../.."
alias df='\df -hT'
alias du='\du -h'

# grep
alias g="\grep -n"
alias grep="\grep -n"
export GREP_OPTIONS="--color=auto"

# network
alias myip="\curl -4 ifconfig.co/json"
alias p="\ping"
alias n="\nslookup"
alias d="\dig"
alias ssh="\ssh -v"

# terminal
alias c="\clear"
alias tmux="\tmux -2"
alias tm="\tmux -2"
alias nv="nvim"

# show pids by port
function lsport {
  lsof -i:"$1"
}

# tldr
function tldr {
  curl cheat.sh/"$1"
}

# wttr
function wttr {
  curl wttr.in/"$1"
}
# go
# https://golang.org/
export GOPATH="$HOME/dev/.go"
export GO111MODULE="auto"
export PATH="$PATH:$GOROOT/bin:$GOPATH/bin"

# volta
# https://volta.sh/
export VOLTA_HOME="$HOME/.volta"
export PATH="$VOLTA_HOME/bin:$PATH"

# rust
# https://rust-lang.org
if [[ -d "$HOME/.cargo" ]]; then
	source "$HOME/.cargo/env"
else
	true
fi

# TODO Delete after Neovim 0.5.0 release.
function nvim-nightly() {
  pushd ~/.local > /dev/null
  echo "Changing current directory to: $(pwd)"
  echo "Fetching nightly Neovim binary... "
  curl -sLO https://github.com/neovim/neovim/releases/download/nightly/nvim-macos.tar.gz
  if [[ $? -ne 0 ]]
  then
    echo "Fetching the binary failed, check what happened to release files. (https://github.com/neovim/neovim/releases)"
    popd > /dev/null
    echo "Changing current directory back to: $(pwd)"
    return 1
  fi
  echo "Extracting archive file..."
  tar xzvf nvim-macos.tar.gz
  echo "Removing archive file..."
  rm nvim-macos.tar.gz
  echo "Done!"
  popd > /dev/null
}
export PATH="$HOME/.local/nvim-osx64/bin:$PATH"
